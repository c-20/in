// LINUX SCANCODES --------------------------------
#define LEFTCLICKSCANCODE       257 // key 1 on keyboard 2
#define RIGHTCLICKSCANCODE      258 // key 2 on keyboard 2
#define MIDDLECLICKSCANCODE     259 // key 3 on keyboard 2
#define SCANCODE1               1
#define SCANCODE2               2
#define SCANCODE3               3
#define SCANCODE4               4
#define SCANCODE5               5
#define SCANCODE6               6
#define SCANCODE7               7
#define SCANCODE8               8
#define ESCAPESCANCODE          9
#define NUMBER1SCANCODE         10
#define NUMBER2SCANCODE         11
#define NUMBER3SCANCODE         12
#define NUMBER4SCANCODE         13
#define NUMBER5SCANCODE         14
#define NUMBER6SCANCODE         15
#define NUMBER7SCANCODE         16
#define NUMBER8SCANCODE         17
#define NUMBER9SCANCODE         18
#define NUMBER0SCANCODE         19
#define MINUSSCANCODE           20
#define EQUALSSCANCODE          21
#define BACKSPACESCANCODE       22
#define TABSCANCODE             23
#define LETTERQSCANCODE         24
#define LETTERWSCANCODE         25
#define LETTERESCANCODE         26
#define LETTERRSCANCODE         27
#define LETTERTSCANCODE         28
#define LETTERYSCANCODE         29
#define LETTERUSCANCODE         30
#define LETTERISCANCODE         31
#define LETTEROSCANCODE         32
#define LETTERPSCANCODE         33
#define LEFTSQBRACKETSCANCODE   34
#define RIGHTSQBRACKETSCANCODE  35
#define RETURNSCANCODE          36
#define LEFTCTRLSCANCODE        37
#define LETTERASCANCODE         38
#define LETTERSSCANCODE         39
#define LETTERDSCANCODE         40
#define LETTERFSCANCODE         41
#define LETTERGSCANCODE         42
#define LETTERHSCANCODE         43
#define LETTERJSCANCODE         44
#define LETTERKSCANCODE         45
#define LETTERLSCANCODE         46
#define SEMICOLONSCANCODE       47
#define APOSTROPHESCANCODE      48
#define GRAVESCANCODE           49
#define LEFTSHIFTSCANCODE       50
#define BACKSLASHSCANCODE       51
#define LETTERZSCANCODE         52
#define LETTERXSCANCODE         53
#define LETTERCSCANCODE         54
#define LETTERVSCANCODE         55
#define LETTERBSCANCODE         56
#define LETTERNSCANCODE         57
#define LETTERMSCANCODE         58
#define COMMASCANCODE           59
#define PERIODSCANCODE          60
#define SLASHSCANCODE           61
#define RIGHTSHIFTSCANCODE      62
#define KEYPADMULTIPLYSCANCODE  63
#define LEFTALTSCANCODE         64
#define SPACESCANCODE           65
#define CAPSLOCKSCANCODE        66
#define F1SCANCODE              67
#define F2SCANCODE              68
#define F3SCANCODE              69
#define F4SCANCODE              70
#define F5SCANCODE              71
#define F6SCANCODE              72
#define F7SCANCODE              73
#define F8SCANCODE              74
#define F9SCANCODE              75
#define F10SCANCODE             76
#define NUMLOCKSCANCODE         77
#define SCROLLLOCKSCANCODE      78
#define KEYPADHOMESCANCODE      79
#define KEYPADUPSCANCODE        80
#define KEYPADPRIORSCANCODE     81
#define KEYPADSUBTRACTSCANCODE  82
#define KEYPADLEFTSCANCODE      83
#define KEYPADBEGINSCANCODE     84
#define KEYPADRIGHTSCANCODE     85
#define KEYPADADDSCANCODE       86
#define KEYPADENDSCANCODE       87
#define KEYPADDOWNSCANCODE      88
#define KEYPADNEXTSCANCODE      89
#define KEYPADINSERTSCANCODE    90
#define KEYPADDELETESCANCODE    91
#define ISOLEVEL3SHIFTSCANCODE  92
#define SCANCODE93              93
#define LESSGREATERBROKENBAR    94
#define F11SCANCODE             95
#define F12SCANCODE             96
#define SCANCODE97              97
#define KATAKANASCANCODE        98
#define HIRAGANASCANCODE        99
#define HENKANMODESCANCODE      100
#define HIRAGKATAKSCANCODE      101
#define MUHENKANMODESCANCODE    102
#define SCANCODE103             103
#define KEYPADENTERSCANCODE     104
#define RIGHTCTRLSCANCODE       105
#define KEYPADDIVIDESCANCODE    106
#define PRINTSCANCODE           107 // Print Screen ? Sys_Req also
#define RIGHTALTSCANCODE        108
#define LINEFEEDSCANCODE        109
#define HOMESCANCODE            110
#define UPSCANCODE              111
#define PRIORSCANCODE           112 // aka PAGE UP
#define LEFTSCANCODE            113
#define RIGHTSCANCODE           114
#define ENDSCANCODE             115
#define DOWNSCANCODE            116
#define NEXTSCANCODE            117 // aka PAGE DOWN
#define INSERTSCANCODE          118
#define DELETESCANCODE          119
#define SCANCODE120             120
#define AUDIOMUTESCANCODE       121
#define AUDIOVOLUMEDOWNSCANCODE 122
#define AUDIOVOLUMEUPSCANCODE   123
#define POWEROFFSCANCODE        124 // yes, right next to VOLUME UP
#define KEYPADEQUALSSCANCODE    125 //  and KEYPAD EQUALS
#define PLUSMINUSSCANCODE       126 //  and PLUS/MINUS
#define PAUSESCANCODE           127
#define LAUNCHASCANCODE         128
#define KEYPADDECIMALSCANCODE   129
#define HANGULSCANCODE          130
#define HANGULHANJASCANCODE     131
#define SCANCODE132             132
#define LEFTWINSCANCODE         133
#define RIGHTWINSCANCODE        134
#define MENUSCANCODE            135
#define CANCELSCANCODE          136
#define REDOSCANCODE            137
#define SUNPROPSSCANCODE        138 // ah yes, SUN PROPS
#define UNDOSCANCODE            139
#define SUNFRONTSCANCODE        140 // what is SUN FRONT ?
#define COPY86SCANCODE          141
#define OPEN86SCANCODE          142
#define PASTE86SCANCODE         143
#define FINDSCANCODE            144
#define CUT86SCANCODE           145
#define HELPSCANCODE            146
#define MENUKB86SCANCODE        147
#define CALCULATOR86SCANCODE    148
#define SCANCODE149             149
#define SLEEP86SCANCODE         150
#define WAKEUP86SCANCODE        151
#define EXPLORER86SCANCODE      152
#define SEND86SCANCODE          153
#define SCANCODE154             154
#define XFER86SCANCODE          155
#define LAUNCH186SCANCODE       156
#define LAUNCH286SCANCODE       157
#define WWW86SCANCODE           158
#define DOS86SCANCODE           159
#define SCREENSAVER86SCANCODE   160
#define ROTATEWINDOWS86SCANCODE 161
#define TASKPANE86SCANCODE      162
#define MAIL86SCANCODE          163
#define FAVOURITES86SCANCODE    164
#define MYCOMPUTER86SCANCODE    165
#define BACK86SCANCODE          166
#define FORWARD86SCANCODE       167
#define SCANCODE168             168
#define EJECT86SCANCODE         169 // EJECT (1) OF XF86 KEYSET
#define EJECT286SCANCODE        170 // EJECT (2) OF XF86 KEYSET
#define AUDIONEXT86SCANCODE     171 // NEXT
#define AUDIOPLAY86SCANCODE     172 // PLAY
#define AUDIOPREV86SCANCODE     173 // PREV
#define AUDIOSTOP86SCANCODE     174 // STOP
#define AUDIORECORD86SCANCODE   175 // RECORD
#define AUDIOREWIND86SCANCODE   176 // REWIND
#define PHONE86SCANCODE         177 // BUT WHO IS PHONE?!?!?
#define SCANCODE178             178
#define TOOLS86SCANCODE         179
#define HOMEPAGE86SCANCODE      180
#define RELOAD86SCANCODE        181
#define CLOSE86SCANCODE         182
#define SCANCODE183             183
#define SCANCODE184             184
#define SCROLLUP86SCANCODE      185
#define SCROLLDOWN86SCANCODE    186
#define PARENLEFTSCANCODE       187 // left parentheses??
#define PARENRIGHTSCANCODE      188
#define NEW86SCANCODE           189
#define REDO2SCANCODE           190 // another redo key ....?
#define TOOLS286SCANCODE        191 // another tools86 key ....?
#define UPPERSCANCODELIMIT      191 // because this is too arduous
// WINDOWS VIRTUAL KEYS ---------------------------
#define LEFTBUTTONVKEY       0x01
#define RIGHTBUTTONVKEY      0x02
#define CANCELVKEY           0x03
#define MIDDLEBUTTONVKEY     0x04
#define XBUTTON1VKEY         0x05
#define XBUTTON2VKEY         0x06
#define VKEY7                0x07
#define BACKVKEY             0x08
#define TABVKEY              0x09
#define VKEY10               0x0A
#define VKEY11               0x0B
#define CLEARVKEY            0x0C
#define RETURNVKEY            0x0D // ENTER key
#define VKEY14                0x0E
#define VKEY15                0x0F
#define SHIFTVKEY             0x10
#define CONTROLVKEY           0x11
#define MENUVKEY              0x12 // ALT key
#define PAUSEVKEY             0x13
#define CAPITALVKEY           0x14
#define IMEKANAHANGULVKEY     0x15
#define IMEONVKEY             0x16
#define IMEJUNJAVKEY          0x17
#define IMEFINALVKEY          0x18
#define IMEHANJAKANJIVKEY     0x19
#define IMEOFFVKEY            0x1A
#define ESCAPEVKEY            0x1B
#define IMECONVERTVKEY        0x1C
#define IMENONCONVERTVKEY     0x1D
#define IMEACCEPTVKEY         0x1E
#define IMEMODECHANGEVKEY     0x1F
#define SPACEVKEY             0x20
#define PRIORVKEY             0x21 // PAGE UP
#define NEXTVKEY              0x22 // PAGE DOWN
#define ENDVKEY               0x23
#define HOMEVKEY              0x24
#define LEFTVKEY              0x25
#define UPVKEY                0x26
#define RIGHTVKEY             0x27
#define DOWNVKEY              0x28
#define SELECTVKEY            0x29
#define PRINTVKEY             0x2A // not PRINT SCREEN !
#define EXECUTEVKEY           0x2B
#define SNAPSHOTVKEY          0x2C
#define INSERTVKEY            0x2D
#define DELETEVKEY            0x2E
#define HELPVKEY              0x2F
#define NUMBER0VKEY           0x30
#define NUMBER1VKEY           0x31
#define NUMBER2VKEY           0x32
#define NUMBER3VKEY           0x33
#define NUMBER4VKEY           0x34
#define NUMBER5VKEY           0x35
#define NUMBER6VKEY           0x36
#define NUMBER7VKEY           0x37
#define NUMBER8VKEY           0x38
#define NUMBER9VKEY           0x39
#define VKEY3A                0x3A
#define VKEY3B                0x3B
#define VKEY3C                0x3C
#define VKEY3D                0x3D
#define VKEY3E                0x3E
#define VKEY3F                0x3F
#define VKEY40                0x40
#define LETTERAVKEY           0x41
#define LETTERBVKEY           0x42
#define LETTERCVKEY           0x43
#define LETTERDVKEY           0x44
#define LETTEREVKEY           0x45
#define LETTERFVKEY           0x46
#define LETTERGVKEY           0x47
#define LETTERHVKEY           0x48
#define LETTERIVKEY           0x49
#define LETTERJVKEY           0x4A
#define LETTERKVKEY           0x4B
#define LETTERLVKEY           0x4C
#define LETTERMVKEY           0x4D
#define LETTERNVKEY           0x4E
#define LETTEROVKEY           0x4F
#define LETTERPVKEY           0x50
#define LETTERQVKEY           0x51
#define LETTERRVKEY           0x52
#define LETTERSVKEY           0x53
#define LETTERTVKEY           0x54
#define LETTERUVKEY           0x55
#define LETTERVVKEY           0x56
#define LETTERWVKEY           0x57
#define LETTERXVKEY           0x58
#define LETTERYVKEY           0x59
#define LETTERZVKEY           0x5A
#define LEFTWINVKEY           0x5B
#define RIGHTWINVKEY          0x5C
#define APPSVKEY              0x5D
#define VKEY5E                0x5E
#define SLEEPVKEY             0x5F
#define NUMPAD0VKEY           0x60
#define NUMPAD1VKEY           0x61
#define NUMPAD2VKEY           0x62
#define NUMPAD3VKEY           0x63
#define NUMPAD4VKEY           0x64
#define NUMPAD5VKEY           0x65
#define NUMPAD6VKEY           0x66
#define NUMPAD7VKEY           0x67
#define NUMPAD8VKEY           0x68
#define NUMPAD9VKEY           0x69
#define MULTIPLYVKEY          0x6A
#define ADDVKEY               0x6B
#define SEPARATORVKEY         0x6C
#define SUBTRACTVKEY          0x6D
#define DECIMALVKEY           0x6E
#define DIVIDEVKEY            0x6F
#define F1VKEY                0x70
#define F2VKEY                0x71
#define F3VKEY                0x72
#define F4VKEY                0x73
#define F5VKEY                0x74
#define F6VKEY                0x75
#define F7VKEY                0x76
#define F8VKEY                0x77
#define F9VKEY                0x78
#define F10VKEY               0x79
#define F11VKEY               0x7A
#define F12VKEY               0x7B
#define F13VKEY               0x7C
#define F14VKEY               0x7D
#define F15VKEY               0x7E
#define F16VKEY               0x7F
#define F17VKEY               0x80
#define F18VKEY               0x81
#define F19VKEY               0x82
#define F20VKEY               0x83
#define F21VKEY               0x84
#define F22VKEY               0x85
#define F23VKEY               0x86
#define F24VKEY               0x87
#define VKEY88                0x88
#define VKEY89                0x89
#define VKEY8A                0x8A
#define VKEY8B                0x8B
#define VKEY8C                0x8C
#define VKEY8D                0x8D
#define VKEY8E                0x8E
#define VKEY8F                0x8F
#define NUMLOCKVKEY           0x90
#define SCROLLVKEY            0x91 // SCROLL LOCK
#define VKEYOEM92             0x92
#define VKEYOEM93             0x93
#define VKEYOEM94             0x94
#define VKEYOEM95             0x95
#define VKEYOEM96             0x96
// VKEY97-9F           0x97 - 0x9F
#define LEFTSHIFTVKEY         0xA0
#define RIGHTSHIFTVKEY        0xA1
#define LEFTCONTROLVKEY       0xA2
#define RIGHTCONTROLVKEY      0xA3
#define LEFTMENUVKEY          0xA4 // left ALT
#define RIGHTMENUVKEY         0xA5 // right ALT
#define BROWSERBACKVKEY       0xA6
#define BROWSERFORWARDVKEY    0xA7
#define BROWSERREFRESHVKEY    0xA8
#define BROWSERSTOPVKEY       0xA9
#define BROWSERSEARCHVKEY     0xAA
#define BROWSERFAVOURITESVKEY 0xAB
#define BROWSERHOMEVKEY       0xAC
#define VOLUMEMUTEVKEY        0xAD
#define VOLUMEDOWNVKEY        0xAE
#define VOLUMEUPVKEY          0xAF
#define MEDIANEXTTRACKVKEY    0xB0
#define MEDIAPREVTRACKVKEY    0xB1
#define MEDIASTOPVKEY         0xB2
#define MEDIAPLAYPAUSEVKEY    0xB3
#define LAUNCHMAILVKEY        0xB4
#define LAUNCHMEDIASELECTVKEY 0xB5
#define LAUNCHAPP1VKEY        0xB6
#define LAUNCHAPP2VKEY        0xB7
#define VKEYB8                0xB8
#define VKEYB9                0xB9
#define OEM1VKEY              0xBA
#define OEMPLUSVKEY           0xBB
#define OEMCOMMAVKEY          0xBC
#define OEMMINUSVKEY          0xBD
#define OEMPERIODVKEY         0xBE
#define OEM2VKEY              0xBF
#define OEM3VKEY              0xC0
#define VKEYC1                0xC1
// C1-D7 reserved, D8-DA unassigned
#define OEM4VKEY              0xDB
#define OEM5VKEY              0xDC
#define OEM6VKEY              0xDD
#define OEM7VKEY              0xDE
#define OEM8VKEY              0xDF
#define VKEYE0                0xE0
#define OEME1VKEY             0xE1
#define OEM102VKEY            0xE2 // angle bracket or backslash key
#define OEME3VKEY             0xE3
#define OEME4VKEY             0xE4
#define IMEPROCESSVKEY        0xE5
#define OEME6VKEY             0xE6
#define PACKETVKEY            0xE7 // pass unicode char as keystrokes
#define VKEYE8                0xE8
#define OEME9VKEY             0xE9
// EA-F4 OEM-specific
#define OEMF5VKEY             0xF5
#define ATTNVKEY              0xF6
#define CRSELVKEY             0xF7
#define EXSELVKEY             0xF8
#define EREOFVKEY             0xF9 // erase EOF
#define PLAYVKEY              0xFA // play rather than play/pause
#define ZOOMVKEY              0xFB
#define NONAMEVKEY            0xFC
#define PA1VKEY               0xFD
#define OEMCLEARVKEY          0xFE
#define VKEYUPPERLIMIT        0xFE // no 0xFF listed
// CODE TO PRESS TIME KEY -------------------------
// todo: map mouse left/right clicks to scancode 1/2 (mouse movement in extrabuffers)
// or put mouseclicks in extrabuffers too? both 1 (allmouseclicks) /and/ extrabuffer mousedevice1 leftclick
typedef struct _VKey {
  int vkey;
  int vkey2;
} VKey;
VKey scancodetotimekeycode(int scancode, int modifiercode) {
  int shift = iskbmodifierdown(modifiercode, KBSHIFTMODIFIER);
  int ctrl  = iskbmodifierdown(modifiercode, KBCTRLMODIFIER );
  VKey vkey = {0, 0};
  if (scancode == 0) { vkey.vkey = 0; }
  else if (scancode == LEFTCLICKSCANCODE  ) { vkey.vkey = LEFTBUTTONVKEY;   }
//#define SCANCODE1               1 // TODO: PRESS SCANCODE 1 ON LEFT CLICK
  else if (scancode == RIGHTCLICKSCANCODE ) { vkey.vkey = RIGHTBUTTONVKEY;  }
//#define SCANCODE2               2 // TODO: PRESS SCANCODE 2 ON RIGHT CLICK
  else if (scancode == SCANCODE3          ) { vkey.vkey = CANCELVKEY;       }
//#define SCANCODE4               4
  else if (scancode == MIDDLECLICKSCANCODE) { vkey.vkey = MIDDLEBUTTONVKEY; }
//#define SCANCODE5               5
// #define XBUTTON1VKEY       0x05
//#define SCANCODE6               6
// #define XBUTTON2VKEY       0x06
//#define SCANCODE7               7
//#define SCANCODE8               8
  else if (scancode == F1SCANCODE         ) { vkey.vkey = (ctrl) ? F13VKEY : F1VKEY;  }
  else if (scancode == F2SCANCODE         ) { vkey.vkey = (ctrl) ? F14VKEY : F2VKEY;  }
  else if (scancode == F3SCANCODE         ) { vkey.vkey = (ctrl) ? F15VKEY : F3VKEY;  }
  else if (scancode == F4SCANCODE         ) { vkey.vkey = (ctrl) ? F16VKEY : F4VKEY;  }
  else if (scancode == F5SCANCODE         ) { vkey.vkey = (ctrl) ? F17VKEY : F5VKEY;  }
  else if (scancode == F6SCANCODE         ) { vkey.vkey = (ctrl) ? F18VKEY : F6VKEY;  }
  else if (scancode == F7SCANCODE         ) { vkey.vkey = (ctrl) ? F19VKEY : F7VKEY;  }
  else if (scancode == F8SCANCODE         ) { vkey.vkey = (ctrl) ? F20VKEY : F8VKEY;  }
  else if (scancode == F9SCANCODE         ) { vkey.vkey = (ctrl) ? F21VKEY : F9VKEY;  }
  else if (scancode == F10SCANCODE        ) { vkey.vkey = (ctrl) ? F22VKEY : F10VKEY; }
  else if (scancode == F11SCANCODE        ) { vkey.vkey = (ctrl) ? F23VKEY : F11VKEY; }
  else if (scancode == F12SCANCODE        ) { vkey.vkey = (ctrl) ? F24VKEY : F12VKEY; }
  else if (scancode == ESCAPESCANCODE     ) { vkey.vkey = ESCAPEVKEY;   }
  else if (scancode == BACKSPACESCANCODE  ) { vkey.vkey = BACKVKEY;     }
  else if (scancode == TABSCANCODE        ) { vkey.vkey = TABVKEY;      }
  else if (scancode == LEFTSHIFTSCANCODE  ) { vkey.vkey = LEFTSHIFTVKEY;    vkey.vkey2 = SHIFTVKEY;   }
  else if (scancode == RIGHTSHIFTSCANCODE ) { vkey.vkey = RIGHTSHIFTVKEY;   vkey.vkey2 = SHIFTVKEY;   }
  else if (scancode == LEFTCTRLSCANCODE   ) { vkey.vkey = LEFTCONTROLVKEY;  vkey.vkey2 = CONTROLVKEY; }
  else if (scancode == RIGHTCTRLSCANCODE  ) { vkey.vkey = RIGHTCONTROLVKEY; vkey.vkey2 = CONTROLVKEY; }
  else if (scancode == LEFTALTSCANCODE    ) { vkey.vkey = LEFTMENUVKEY;     vkey.vkey2 = MENUVKEY;    }
  else if (scancode == RIGHTALTSCANCODE   ) { vkey.vkey = RIGHTMENUVKEY;    vkey.vkey2 = MENUVKEY;    }
  else if (scancode == LEFTWINSCANCODE    ) { vkey.vkey = LEFTWINVKEY;                           }
  else if (scancode == RIGHTWINSCANCODE   ) { vkey.vkey = RIGHTWINVKEY;                          }
  else if (scancode == NUMLOCKSCANCODE    ) { vkey.vkey = NUMLOCKVKEY; }
  else if (scancode == CAPSLOCKSCANCODE   ) { vkey.vkey = CAPITALVKEY; }
  else if (scancode == SCROLLLOCKSCANCODE ) { vkey.vkey = SCROLLVKEY;  }
  else if (scancode == LETTERASCANCODE    ) { vkey.vkey = LETTERAVKEY;  }
  else if (scancode == LETTERBSCANCODE    ) { vkey.vkey = LETTERBVKEY;  }
  else if (scancode == LETTERCSCANCODE    ) { vkey.vkey = LETTERCVKEY;  }
  else if (scancode == LETTERDSCANCODE    ) { vkey.vkey = LETTERDVKEY;  }
  else if (scancode == LETTERESCANCODE    ) { vkey.vkey = LETTEREVKEY;  }
  else if (scancode == LETTERFSCANCODE    ) { vkey.vkey = LETTERFVKEY;  }
  else if (scancode == LETTERGSCANCODE    ) { vkey.vkey = LETTERGVKEY;  }
  else if (scancode == LETTERHSCANCODE    ) { vkey.vkey = LETTERHVKEY;  }
  else if (scancode == LETTERISCANCODE    ) { vkey.vkey = LETTERIVKEY;  }
  else if (scancode == LETTERJSCANCODE    ) { vkey.vkey = LETTERJVKEY;  }
  else if (scancode == LETTERKSCANCODE    ) { vkey.vkey = LETTERKVKEY;  }
  else if (scancode == LETTERLSCANCODE    ) { vkey.vkey = LETTERLVKEY;  }
  else if (scancode == LETTERMSCANCODE    ) { vkey.vkey = LETTERMVKEY;  }
  else if (scancode == LETTERNSCANCODE    ) { vkey.vkey = LETTERNVKEY;  }
  else if (scancode == LETTEROSCANCODE    ) { vkey.vkey = LETTEROVKEY;  }
  else if (scancode == LETTERPSCANCODE    ) { vkey.vkey = LETTERPVKEY;  }
  else if (scancode == LETTERQSCANCODE    ) { vkey.vkey = LETTERQVKEY;  }
  else if (scancode == LETTERRSCANCODE    ) { vkey.vkey = LETTERRVKEY;  }
  else if (scancode == LETTERSSCANCODE    ) { vkey.vkey = LETTERSVKEY;  }
  else if (scancode == LETTERTSCANCODE    ) { vkey.vkey = LETTERTVKEY;  }
  else if (scancode == LETTERUSCANCODE    ) { vkey.vkey = LETTERUVKEY;  }
  else if (scancode == LETTERVSCANCODE    ) { vkey.vkey = LETTERVVKEY;  }
  else if (scancode == LETTERWSCANCODE    ) { vkey.vkey = LETTERWVKEY;  }
  else if (scancode == LETTERXSCANCODE    ) { vkey.vkey = LETTERXVKEY;  }
  else if (scancode == LETTERYSCANCODE    ) { vkey.vkey = LETTERYVKEY;  }
  else if (scancode == LETTERZSCANCODE    ) { vkey.vkey = LETTERZVKEY;  }
  else if (scancode == LEFTSQBRACKETSCANCODE ) { vkey.vkey = OEM4VKEY; }
  else if (scancode == RIGHTSQBRACKETSCANCODE) { vkey.vkey = OEM6VKEY; }
  else if (scancode == BACKSLASHSCANCODE     ) { vkey.vkey = OEM5VKEY; }
  else if (scancode == SEMICOLONSCANCODE     ) { vkey.vkey = OEM1VKEY; }
  else if (scancode == APOSTROPHESCANCODE    ) { vkey.vkey = OEM7VKEY; }
// #define OEM8VKEY              0xDF // miscellaneous - varies by keyboard
  else if (scancode == GRAVESCANCODE         ) { vkey.vkey = OEM3VKEY; }
  else if (scancode == UPSCANCODE    || scancode == KEYPADUPSCANCODE   ) { vkey.vkey = UPVKEY;    }
  else if (scancode == DOWNSCANCODE  || scancode == KEYPADDOWNSCANCODE ) { vkey.vkey = DOWNVKEY;  }
  else if (scancode == LEFTSCANCODE  || scancode == KEYPADLEFTSCANCODE ) { vkey.vkey = LEFTVKEY;  }
  else if (scancode == RIGHTSCANCODE || scancode == KEYPADRIGHTSCANCODE) { vkey.vkey = RIGHTVKEY; }
  else if (scancode == NUMBER0SCANCODE ) { vkey.vkey = NUMBER0VKEY;  vkey.vkey2 = NUMPAD0VKEY; }
  else if (scancode == NUMBER1SCANCODE ) { vkey.vkey = NUMBER1VKEY;  vkey.vkey2 = NUMPAD1VKEY; }
  else if (scancode == NUMBER2SCANCODE ) { vkey.vkey = NUMBER2VKEY;  vkey.vkey2 = NUMPAD2VKEY; }
  else if (scancode == NUMBER3SCANCODE ) { vkey.vkey = NUMBER3VKEY;  vkey.vkey2 = NUMPAD3VKEY; }
  else if (scancode == NUMBER4SCANCODE ) { vkey.vkey = NUMBER4VKEY;  vkey.vkey2 = NUMPAD4VKEY; }
  else if (scancode == NUMBER5SCANCODE ) { vkey.vkey = NUMBER5VKEY;  vkey.vkey2 = NUMPAD5VKEY; }
  else if (scancode == NUMBER6SCANCODE ) { vkey.vkey = NUMBER6VKEY;  vkey.vkey2 = NUMPAD6VKEY; }
  else if (scancode == NUMBER7SCANCODE ) { vkey.vkey = NUMBER7VKEY;  vkey.vkey2 = NUMPAD7VKEY; }
  else if (scancode == NUMBER8SCANCODE ) { vkey.vkey = NUMBER8VKEY;  vkey.vkey2 = NUMPAD8VKEY; }
  else if (scancode == NUMBER9SCANCODE ) { vkey.vkey = NUMBER9VKEY;  vkey.vkey2 = NUMPAD9VKEY; }
  else if (scancode == COMMASCANCODE   ) { vkey.vkey = OEMCOMMAVKEY; vkey.vkey2 = SEPARATORVKEY; } // consider: RETURN, SPACE and TAB?
  // consider LESSTHANVKEY, GREATERTHANVKEY, QUESTIONMARKVKEY
  else if (scancode == PERIODSCANCODE || scancode == KEYPADDECIMALSCANCODE ) { vkey.vkey = OEMPERIODVKEY; vkey.vkey2 = DECIMALVKEY; }
  else if (((!shift && !ctrl) && (scancode == EQUALSSCANCODE )) || scancode == KEYPADEQUALSSCANCODE   ) { vkey.vkey = RETURNVKEY; } // vkey.vkey2 = EQUALSVKEY; } // no EQUALSVKEY ? do not match ctrl+= as this is + for zoom
  else if (                                                        scancode == KEYPADENTERSCANCODE    ) { vkey.vkey = RETURNVKEY; } // enter is another return !
  else if ((( shift ||  ctrl) && (scancode == EQUALSSCANCODE )) || scancode == KEYPADADDSCANCODE      ) { vkey.vkey = OEMPLUSVKEY;  vkey.vkey2 = ADDVKEY; } // shifted means plus instead, unless zooming with ctrl, then use plus!
  else if (((!shift ||  ctrl) && (scancode == MINUSSCANCODE  )) || scancode == KEYPADSUBTRACTSCANCODE ) { vkey.vkey = OEMMINUSVKEY; vkey.vkey2 = SUBTRACTVKEY; } // shifted means underscore instead, unless zooming, then stay as minus!
  else if ((( shift         ) && (scancode == MINUSSCANCODE  ))                                       ) { vkey.vkey = OEMMINUSVKEY; } // vkey.vkey2 = UNDERSCOREVKEY; } // (unless ctrl+ matched in previous condition)
  else if ((( shift         ) && (scancode == NUMBER8SCANCODE)) || scancode == KEYPADMULTIPLYSCANCODE ) { vkey.vkey = MULTIPLYVKEY; }
  else if (scancode == SLASHSCANCODE  || scancode == KEYPADDIVIDESCANCODE  ) { vkey.vkey = OEM2VKEY; vkey.vkey2 = (shift) ? 0 : DIVIDEVKEY; } // ? is not divide
// SPACE, COMMA, SEMICOLON and RETURN can all be considered SEPARATORVKEY, potentially
  else if (scancode == SPACESCANCODE    ) { vkey.vkey = SPACEVKEY;  } // vkey.vkey2 = SEPARATORVKEY; }
  else if (scancode == RETURNSCANCODE   ) { vkey.vkey = RETURNVKEY; } // vkey.vkey2 = SEPARATORVKEY; }
  else if (scancode == HOMESCANCODE   || scancode == KEYPADHOMESCANCODE  ) { vkey.vkey = HOMEVKEY;     } // Home
//#define KEYPADBEGINSCANCODE     84
  else if (scancode == ENDSCANCODE    || scancode == KEYPADENDSCANCODE   ) { vkey.vkey = ENDVKEY;      } // End
  else if (scancode == PRIORSCANCODE  || scancode == KEYPADPRIORSCANCODE ) { vkey.vkey = PRIORVKEY;    } // Page Down
  else if (scancode == NEXTSCANCODE   || scancode == KEYPADNEXTSCANCODE  ) { vkey.vkey = NEXTVKEY;     } // Page Up
  else if (scancode == INSERTSCANCODE || scancode == KEYPADINSERTSCANCODE) { vkey.vkey = INSERTVKEY;   } // Insert
  else if (scancode == DELETESCANCODE || scancode == KEYPADDELETESCANCODE) { vkey.vkey = DELETEVKEY;   } // Delete
  else if (scancode == AUDIOMUTESCANCODE      ) { vkey.vkey = VOLUMEMUTEVKEY;     }
  else if (scancode == AUDIOVOLUMEDOWNSCANCODE) { vkey.vkey = VOLUMEDOWNVKEY;     }
  else if (scancode == AUDIOVOLUMEUPSCANCODE  ) { vkey.vkey = VOLUMEUPVKEY;       }
  else if (scancode == AUDIONEXT86SCANCODE    ) { vkey.vkey = MEDIANEXTTRACKVKEY; }
  else if (scancode == AUDIOPLAY86SCANCODE    ) { vkey.vkey = MEDIAPLAYPAUSEVKEY; }
  else if (scancode == AUDIOPREV86SCANCODE    ) { vkey.vkey = MEDIAPREVTRACKVKEY; }
  else if (scancode == AUDIOSTOP86SCANCODE    ) { vkey.vkey = MEDIASTOPVKEY;      }
//#define AUDIORECORD86SCANCODE   175 // RECORD
//#define AUDIOREWIND86SCANCODE   176 // REWIND
//#define PHONE86SCANCODE         177 // BUT WHO IS PHONE?!?!?
//#define POWEROFFSCANCODE        124 // yes, right next to VOLUME UP
//#define LESSGREATERBROKENBARSCANCODE    94
//#define PLUSMINUSSCANCODE       126 //  and PLUS/MINUS
//#define MENUKB86SCANCODE        147
  else if (scancode == PAUSESCANCODE  ) { vkey.vkey = PAUSEVKEY; }
  else if (scancode == SLEEP86SCANCODE) { vkey.vkey = SLEEPVKEY; }
//#define WAKEUP86SCANCODE        151
  else if (scancode == LAUNCHASCANCODE) { vkey.vkey = APPSVKEY; }
//#define MENUSCANCODE            135
//#define SCREENSAVER86SCANCODE   160
//#define MYCOMPUTER86SCANCODE    165
//#define EXPLORER86SCANCODE      152
//#define DOS86SCANCODE           159
//#define NEW86SCANCODE           189
//#define OPEN86SCANCODE          142
//#define FINDSCANCODE            144
//#define SEND86SCANCODE          153
//#define XFER86SCANCODE          155
//#define TOOLS86SCANCODE         179
//#define TOOLS286SCANCODE        191 // another tools86 key ....?
//#define CALCULATOR86SCANCODE    148
//#define ROTATEWINDOWS86SCANCODE 161
//#define LINEFEEDSCANCODE        109
// #define SELECTVKEY         0x29
// #define EXECUTEVKEY        0x2B
  else if (scancode == PRINTSCANCODE) { vkey.vkey = SNAPSHOTVKEY; vkey.vkey2 = PRINTVKEY; }
//#define CANCELSCANCODE          136
// #define CLEARVKEY          0x0C
//#define EJECT86SCANCODE         169 // EJECT (1) OF XF86 KEYSET
//#define EJECT286SCANCODE        170 // EJECT (2) OF XF86 KEYSET
//#define CUT86SCANCODE           145
//#define COPY86SCANCODE          141
//#define PASTE86SCANCODE         143
//#define UNDOSCANCODE            139
//#define REDOSCANCODE            137
//#define REDO2SCANCODE           190 // another redo key ....?
  else if (scancode == LAUNCH186SCANCODE   ) { vkey.vkey = LAUNCHAPP1VKEY;        } // menu A
  else if (scancode == LAUNCH286SCANCODE   ) { vkey.vkey = LAUNCHAPP2VKEY;        } // menu B
  else if (scancode == WWW86SCANCODE       ) { vkey.vkey = BROWSERSEARCHVKEY;     } // address / search
  else if (scancode == TASKPANE86SCANCODE  ) { vkey.vkey = LAUNCHMEDIASELECTVKEY; } // taskpane
  else if (scancode == MAIL86SCANCODE      ) { vkey.vkey = LAUNCHMAILVKEY;        } // mailpane
  else if (scancode == BACK86SCANCODE      ) { vkey.vkey = BROWSERBACKVKEY;       } // prev
  else if (scancode == FORWARD86SCANCODE   ) { vkey.vkey = BROWSERFORWARDVKEY;    } // next
  else if (scancode == RELOAD86SCANCODE    ) { vkey.vkey = BROWSERREFRESHVKEY;    } // go
  else if (scancode == CLOSE86SCANCODE     ) { vkey.vkey = BROWSERSTOPVKEY;       } // stop
  else if (scancode == HOMEPAGE86SCANCODE  ) { vkey.vkey = BROWSERHOMEVKEY;       } // home
  else if (scancode == FAVOURITES86SCANCODE) { vkey.vkey = BROWSERFAVOURITESVKEY; } // faves
  else if (scancode == HELPSCANCODE        ) { vkey.vkey = HELPVKEY;              } // helps
//#define SCROLLUP86SCANCODE      185
//#define SCROLLDOWN86SCANCODE    186
//#define PARENLEFTSCANCODE       187
//#define PARENRIGHTSCANCODE      188
//#define SUNPROPSSCANCODE        138 // ah yes, SUN PROPS
//#define SUNFRONTSCANCODE        140 // what is SUN FRONT ?
// IME/Unicode keys --------------------------------------------------------
  else if (scancode == KATAKANASCANCODE || scancode == HANGULSCANCODE) { vkey.vkey = IMEKANAHANGULVKEY; }
  else if (scancode == HANGULHANJASCANCODE                           ) { vkey.vkey = IMEHANJAKANJIVKEY; }
  else if (scancode == HENKANMODESCANCODE                            ) { vkey.vkey = IMECONVERTVKEY;    }
  else if (scancode == MUHENKANMODESCANCODE                          ) { vkey.vkey = IMENONCONVERTVKEY; }
  else if (scancode == HIRAGKATAKSCANCODE                            ) { vkey.vkey = IMEMODECHANGEVKEY; }
//#define HIRAGANASCANCODE       99
// #define IMEJUNJAVKEY          0x17
// #define IMEOFFVKEY            0x1A // English input
// #define IMEONVKEY             0x16 // Character input
// #define IMEFINALVKEY          0x18
// #define IMEACCEPTVKEY         0x1E
// #define IMEPROCESSVKEY        0xE5
// #define PACKETVKEY            0xE7 // pass unicode char as keystrokes
  return vkey;
}

typedef struct _Scancode {
  int scancode;
  int modifier;
} Scancode;
Scancode asciicodetoscancode(int asciicode) {
  Scancode sc = { 0, 0 };
  int shift = kbmodifierdownbit(KBSHIFTMODIFIER);
  if      (asciicode == 0  ) { sc.scancode = 0; }
  else if (asciicode == 1  ) { sc.scancode = 0; }
  else if (asciicode == 2  ) { sc.scancode = 0; }
  else if (asciicode == 3  ) { sc.scancode = 3; } // map Ctrl+C (todo: signal handler)
  else if (asciicode == 4  ) { sc.scancode = 0; }
  else if (asciicode == 5  ) { sc.scancode = 0; }
  else if (asciicode == 6  ) { sc.scancode = 0; }
  else if (asciicode == 7  ) { sc.scancode = 0; }
  else if (asciicode == 8  ) { sc.scancode = BACKSPACESCANCODE;  }
  else if (asciicode == 9  ) { sc.scancode = TABSCANCODE;        }
  else if (asciicode == 10 ) { sc.scancode = RETURNSCANCODE;     } // this is LINEFEEDSCANCODE (^J) technically
  else if (asciicode == 11 ) { sc.scancode = 0; }                  // but \n maps to \r\n in linux
  else if (asciicode == 12 ) { sc.scancode = 0; }
  else if (asciicode == 13 ) { sc.scancode = RETURNSCANCODE;     } // \r would be RETURNSCANCODE (^M)
  else if (asciicode == 14 ) { sc.scancode = 0;                  }
  else if (asciicode == 15 ) { sc.scancode = 0;                  }
  else if (asciicode == 16 ) { sc.scancode = 0;                  }
  else if (asciicode == 17 ) { sc.scancode = 0;                  }
  else if (asciicode == 18 ) { sc.scancode = 0;                  }
  else if (asciicode == 19 ) { sc.scancode = 0;                  }
  else if (asciicode == 20 ) { sc.scancode = 0;                  }
  else if (asciicode == 21 ) { sc.scancode = 0;                  }
  else if (asciicode == 22 ) { sc.scancode = 0;                  }
  else if (asciicode == 23 ) { sc.scancode = 0;                  }
  else if (asciicode == 24 ) { sc.scancode = 0;                  }
  else if (asciicode == 25 ) { sc.scancode = 0;                  }
  else if (asciicode == 26 ) { sc.scancode = 0;                  }
  else if (asciicode == 27 ) { sc.scancode = ESCAPESCANCODE;     }
  else if (asciicode == 28 ) { sc.scancode = 0;                  }
  else if (asciicode == 29 ) { sc.scancode = 0;                  }
  else if (asciicode == 30 ) { sc.scancode = 0;                  }
  else if (asciicode == 31 ) { sc.scancode = 0;                  }
  else if (asciicode == ' ') { sc.scancode = SPACESCANCODE;      }
  else if (asciicode == '!') { sc.scancode = NUMBER1SCANCODE;    sc.modifier = shift; }
  else if (asciicode == '"') { sc.scancode = APOSTROPHESCANCODE; sc.modifier = shift; }
  else if (asciicode == '#') { sc.scancode = NUMBER3SCANCODE;    sc.modifier = shift; }
  else if (asciicode == '$') { sc.scancode = NUMBER4SCANCODE;    sc.modifier = shift; }
  else if (asciicode == '%') { sc.scancode = NUMBER5SCANCODE;    sc.modifier = shift; }
  else if (asciicode == '&') { sc.scancode = NUMBER7SCANCODE;    sc.modifier = shift; }
  else if (asciicode =='\'') { sc.scancode = APOSTROPHESCANCODE; }
  else if (asciicode == '(') { sc.scancode = NUMBER9SCANCODE;    sc.modifier = shift; }
  else if (asciicode == ')') { sc.scancode = NUMBER0SCANCODE;    sc.modifier = shift; }
  else if (asciicode == '*') { sc.scancode = NUMBER8SCANCODE;    sc.modifier = shift; }
  else if (asciicode == '+') { sc.scancode = EQUALSSCANCODE;     sc.modifier = shift; }
  else if (asciicode == ',') { sc.scancode = COMMASCANCODE;      }
  else if (asciicode == '-') { sc.scancode = MINUSSCANCODE;      }
  else if (asciicode == '.') { sc.scancode = PERIODSCANCODE;     }
  else if (asciicode == '/') { sc.scancode = SLASHSCANCODE;      }
  else if (asciicode == '0') { sc.scancode = NUMBER0SCANCODE;    }
  else if (asciicode == '1') { sc.scancode = NUMBER1SCANCODE;    }
  else if (asciicode == '2') { sc.scancode = NUMBER2SCANCODE;    }
  else if (asciicode == '3') { sc.scancode = NUMBER3SCANCODE;    }
  else if (asciicode == '4') { sc.scancode = NUMBER4SCANCODE;    }
  else if (asciicode == '5') { sc.scancode = NUMBER5SCANCODE;    }
  else if (asciicode == '6') { sc.scancode = NUMBER6SCANCODE;    }
  else if (asciicode == '7') { sc.scancode = NUMBER7SCANCODE;    }
  else if (asciicode == '8') { sc.scancode = NUMBER8SCANCODE;    }
  else if (asciicode == '9') { sc.scancode = NUMBER9SCANCODE;    }
  else if (asciicode == ':') { sc.scancode = SEMICOLONSCANCODE;  sc.modifier = shift; }
  else if (asciicode == ';') { sc.scancode = SEMICOLONSCANCODE;  }
  else if (asciicode == '<') { sc.scancode = COMMASCANCODE;      sc.modifier = shift; }
  else if (asciicode == '=') { sc.scancode = EQUALSSCANCODE;     }
  else if (asciicode == '>') { sc.scancode = PERIODSCANCODE;     sc.modifier = shift; }
  else if (asciicode == '?') { sc.scancode = SLASHSCANCODE;      sc.modifier = shift; }
  else if (asciicode == '@') { sc.scancode = NUMBER2SCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'A') { sc.scancode = LETTERASCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'B') { sc.scancode = LETTERBSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'C') { sc.scancode = LETTERCSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'D') { sc.scancode = LETTERDSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'E') { sc.scancode = LETTERESCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'F') { sc.scancode = LETTERFSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'G') { sc.scancode = LETTERGSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'H') { sc.scancode = LETTERHSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'I') { sc.scancode = LETTERISCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'J') { sc.scancode = LETTERJSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'K') { sc.scancode = LETTERKSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'L') { sc.scancode = LETTERLSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'M') { sc.scancode = LETTERMSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'N') { sc.scancode = LETTERNSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'O') { sc.scancode = LETTEROSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'P') { sc.scancode = LETTERPSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'Q') { sc.scancode = LETTERQSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'R') { sc.scancode = LETTERRSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'S') { sc.scancode = LETTERSSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'T') { sc.scancode = LETTERTSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'U') { sc.scancode = LETTERUSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'V') { sc.scancode = LETTERVSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'W') { sc.scancode = LETTERWSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'X') { sc.scancode = LETTERXSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'Y') { sc.scancode = LETTERYSCANCODE;    sc.modifier = shift; }
  else if (asciicode == 'Z') { sc.scancode = LETTERZSCANCODE;    sc.modifier = shift; }
  else if (asciicode == '[') { sc.scancode = LEFTSQBRACKETSCANCODE;  }
  else if (asciicode =='\\') { sc.scancode = BACKSLASHSCANCODE;      }
  else if (asciicode == ']') { sc.scancode = RIGHTSQBRACKETSCANCODE; }
  else if (asciicode == '^') { sc.scancode = NUMBER6SCANCODE;    sc.modifier = shift; }
  else if (asciicode == '_') { sc.scancode = MINUSSCANCODE;      sc.modifier = shift; }
  else if (asciicode == '`') { sc.scancode = GRAVESCANCODE;      sc.modifier = shift; }
  else if (asciicode == 'a') { sc.scancode = LETTERASCANCODE; }
  else if (asciicode == 'b') { sc.scancode = LETTERBSCANCODE; }
  else if (asciicode == 'c') { sc.scancode = LETTERCSCANCODE; }
  else if (asciicode == 'd') { sc.scancode = LETTERDSCANCODE; }
  else if (asciicode == 'e') { sc.scancode = LETTERESCANCODE; }
  else if (asciicode == 'f') { sc.scancode = LETTERFSCANCODE; }
  else if (asciicode == 'g') { sc.scancode = LETTERGSCANCODE; }
  else if (asciicode == 'h') { sc.scancode = LETTERHSCANCODE; }
  else if (asciicode == 'i') { sc.scancode = LETTERISCANCODE; }
  else if (asciicode == 'j') { sc.scancode = LETTERJSCANCODE; }
  else if (asciicode == 'k') { sc.scancode = LETTERKSCANCODE; }
  else if (asciicode == 'l') { sc.scancode = LETTERLSCANCODE; }
  else if (asciicode == 'm') { sc.scancode = LETTERMSCANCODE; }
  else if (asciicode == 'n') { sc.scancode = LETTERNSCANCODE; }
  else if (asciicode == 'o') { sc.scancode = LETTEROSCANCODE; }
  else if (asciicode == 'p') { sc.scancode = LETTERPSCANCODE; }
  else if (asciicode == 'q') { sc.scancode = LETTERQSCANCODE; }
  else if (asciicode == 'r') { sc.scancode = LETTERRSCANCODE; }
  else if (asciicode == 's') { sc.scancode = LETTERSSCANCODE; }
  else if (asciicode == 't') { sc.scancode = LETTERTSCANCODE; }
  else if (asciicode == 'u') { sc.scancode = LETTERUSCANCODE; }
  else if (asciicode == 'v') { sc.scancode = LETTERVSCANCODE; }
  else if (asciicode == 'w') { sc.scancode = LETTERWSCANCODE; }
  else if (asciicode == 'x') { sc.scancode = LETTERXSCANCODE; }
  else if (asciicode == 'y') { sc.scancode = LETTERYSCANCODE; }
  else if (asciicode == 'z') { sc.scancode = LETTERZSCANCODE; }
  else if (asciicode == '{') { sc.scancode = LEFTSQBRACKETSCANCODE;  sc.modifier = shift; }
  else if (asciicode == '|') { sc.scancode = BACKSLASHSCANCODE;      sc.modifier = shift; }
  else if (asciicode == '}') { sc.scancode = RIGHTSQBRACKETSCANCODE; sc.modifier = shift; }
  else if (asciicode == '~') { sc.scancode = GRAVESCANCODE;          sc.modifier = shift; }
  else if (asciicode == 127) { sc.scancode = DELETESCANCODE;  }
  return sc;
}

int scancodetopresstimekey(Scancode scancode) {
  VKey vkey = scancodetotimekeycode(scancode.scancode, scancode.modifier);
  if (vkey.vkey ) { presstimekey(&timekeyboard, vkey.vkey,  standardinputtimedelay, 2.0f); }
  if (vkey.vkey2) { presstimekey(&timekeyboard, vkey.vkey2, standardinputtimedelay, 3.0f); }
  return (vkey.vkey) ? 1 : 0; // true if a keycode matched
}

int scancodetoreleasetimekey(Scancode scancode) {
  VKey vkey = scancodetotimekeycode(scancode.scancode, scancode.modifier);
  if (vkey.vkey ) { releasetimekey(&timekeyboard, vkey.vkey,  standardinputtimedelay, 2.0f); }
  if (vkey.vkey2) { releasetimekey(&timekeyboard, vkey.vkey2, standardinputtimedelay, 3.0f); }
  return (vkey.vkey) ? 1 : 0; // true if a keycode matched
}

int asciicodetopresstimekey(int asciicode) {
  Scancode scancode = asciicodetoscancode(asciicode);
  return scancodetopresstimekey(scancode);
}

int asciicodetoreleasetimekey(int asciicode) {
  Scancode scancode = asciicodetoscancode(asciicode);
  return scancodetoreleasetimekey(scancode);
}

/* UNMAPPED OR RESERVED
#define ISOLEVEL3SHIFTSCANCODE  92
#define SCANCODE93              93
#define SCANCODE97              97
#define SCANCODE103             103
#define SCANCODE120             120
#define SCANCODE178             178
#define SCANCODE183             183
#define SCANCODE184             184
#define SCANCODE149             149
#define SCANCODE154             154
#define SCANCODE168             168
 #define VKEY07             0x07
 #define VKEY10             0x0A
 #define VKEY11             0x0B
 #define VKEY14             0x0E
 #define VKEY15             0x0F
 #define VKEY3A             0x3A
 #define VKEY3B             0x3B
 #define VKEY3C             0x3C
 #define VKEY3D             0x3D
 #define VKEY3E             0x3E
 #define VKEY3F             0x3F
 #define VKEY40             0x40
 #define VKEY5E             0x5E
 #define VKEY88             0x88
 #define VKEY89             0x89
 #define VKEY8A             0x8A
 #define VKEY8B             0x8B
 #define VKEY8C             0x8C
 #define VKEY8D             0x8D
 #define VKEY8E             0x8E
 #define VKEY8F             0x8F
// VKEY97-9F        0x97 - 0x9F
 #define VKEYB8                0xB8
 #define VKEYB9                0xB9
 #define VKEYC1                0xC1
 #define VKEYE0                0xE0
 #define VKEYE8                0xE8
// OEM keys ------------------------------
 #define OEMSPECIFIC92VKEY     0x92
 #define OEMSPECIFIC93VKEY     0x93
 #define OEMSPECIFIC94VKEY     0x94
 #define OEMSPECIFIC95VKEY     0x95
 #define OEMSPECIFIC96VKEY     0x96
// C1-D7 reserved, D8-DA unassigned
 #define OEME1VKEY             0xE1
 #define OEM102VKEY            0xE2 // angle bracket or backslash key
 #define OEME3VKEY             0xE3
 #define OEME4VKEY             0xE4
 #define OEME6VKEY             0xE6
 #define OEME9VKEY             0xE9
 // EA-F4 OEM-specific
 #define OEMF5VKEY             0xF5
*/ /* OTHER KEYS
 #define ATTNVKEY              0xF6
 #define CRSELVKEY             0xF7
 #define EXSELVKEY             0xF8
 #define EREOFVKEY             0xF9 // erase EOF
 #define PLAYVKEY              0xFA // play rather than play/pause
 #define ZOOMVKEY              0xFB
 #define NONAMEVKEY            0xFC
 #define PA1VKEY               0xFD
 #define OEMCLEARVKEY          0xFE
*/

